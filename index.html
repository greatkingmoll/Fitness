<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>4-Week Training Calendar</title>
  <style>
    body { font-family: Arial, sans-serif; max-width:800px; margin:auto; padding:20px; background:#f5f5f5; }
    h1,h2 { color:#2c3e50; }
    .section, .controls { background:#fff; margin-bottom:20px; padding:15px; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
    .controls { position:sticky; top:20px; }
    button { margin:5px; padding:8px 16px; border:none; background:#27ae60; color:#fff; border-radius:4px; cursor:pointer; }
    button:hover { background:#219651; }
    .progress-bar { background:#ecf0f1; border-radius:10px; overflow:hidden; height:20px; margin:10px 0; }
    .progress-fill { background:#27ae60; height:100%; width:0; transition:width .3s; }
    .collapsible { cursor:pointer; padding:10px; background:#2c3e50; color:#fff; border:none; width:100%; text-align:left; border-radius:4px; margin-bottom:10px; }
    .content { display:none; overflow:hidden; }
    .exercise-item b { display:block; margin-bottom:4px; }
    .week { margin-bottom:10px; }
    .week-header { background:#34495e; color:#fff; padding:10px; border-radius:4px; font-size:1.1em; }
    .day { background:#fafafa; margin:8px 0; padding:10px; border-radius:4px; }
    .day-header { font-weight:bold; margin-bottom:6px; }
    .tracking-row { display:flex; align-items:center; margin-bottom:6px; }
    .tracking-row input[type="checkbox"] { transform:scale(1.2); margin-right:8px; }
    .tracking-row label { flex:1; }
    .tracking-row input[type="number"] { width:60px; margin-left:8px; padding:4px; }
  </style>
</head>
<body>
  <h1>4-Week Training Calendar</h1>

  <button class="collapsible">Exercise Reference & Form Cues</button>
  <div class="content section">
    <h2>Office Micro-Workouts</h2>
    <div class="exercise-item"><b>Wall Sit</b> Back flat, knees at 90°, brace core.</div>
    <div class="exercise-item"><b>Push-ups</b> Hands under shoulders, full range, core tight.</div>
    <div class="exercise-item"><b>Seated Band Row</b> Anchor band, hinge hips, retract scapula.</div>
    <div class="exercise-item"><b>Hip Hinge Drill</b> Hinge at hips, neutral spine.</div>
    <div class="exercise-item"><b>Plank w/ Shoulder Taps</b> Hips stable, tap opposite shoulder.</div>
    <div class="exercise-item"><b>Standing Calf Raises</b> Pause at top, control down.</div>
    <div class="exercise-item"><b>Split Squat</b> Rear foot elevated, front thigh parallel.</div>
    <div class="exercise-item"><b>Chair Dips</b> Elbows back, lean forward.</div>
    <div class="exercise-item"><b>Pallof Press</b> Press away, resist rotation.</div>
    <div class="exercise-item"><b>Glute Bridge March</b> Hips high, alternate knee drive.</div>
    <div class="exercise-item"><b>Incline Push-ups</b> Hands on desk, core braced.</div>
    <div class="exercise-item"><b>Lateral Band Walk</b> Band above knees, small steps.</div>
    <div class="exercise-item"><b>Single-Leg RDL</b> Hinge on one leg, spine neutral.</div>
    <div class="exercise-item"><b>Hollow-Body Hold</b> Lower back pressed, legs & arms off floor.</div>
    <div class="exercise-item"><b>Banded Overhead Press</b> Stand on band, press overhead.</div>

    <h2>Skill Practice</h2>
    <div class="exercise-item"><b>DNS Breathing</b> 5×30s diaphragmatic with brace.</div>
    <div class="exercise-item"><b>Bear Crawl Hold</b> Hips off floor, back flat.</div>
    <div class="exercise-item"><b>Bird Dog</b> Extend opposite arm/leg, hold 2-3s.</div>
    <div class="exercise-item"><b>Bodyweight Squat Practice</b> Slow 3s down, full depth.</div>
    <div class="exercise-item"><b>Wall Slides</b> Back & arms on wall, slide overhead.</div>
    <div class="exercise-item"><b>Hip 90/90 Stretch</b> Rotate knees, pause each side.</div>
    <div class="exercise-item"><b>Band Pull-aparts</b> Squeeze scapula, slow return.</div>
    <div class="exercise-item"><b>Cat-Cow</b> Alternate arch & sag, mobilize spine.</div>
    <div class="exercise-item"><b>Ankle Mobilization</b> Knee to wall, heel down.</div>

    <h2>Eccentric Program</h2>
    <div class="exercise-item"><b>Negative Pull-ups</b> 5s descent, control lowering.</div>
    <div class="exercise-item"><b>Nordic Hamstring Curls</b> 4-5s negative.</div>
    <div class="exercise-item"><b>Step-Down Negatives</b> 3s descent from 18" box.</div>
    <div class="exercise-item"><b>Eccentric Push-ups</b> 4s lower, feet elevated.</div>
    <div class="exercise-item"><b>Single-Leg RDL Negative</b> 3s hinge descent.</div>

    <h2>Heavy Lifting</h2>
    <div class="exercise-item"><b>Deadlift</b> Neutral spine, bar close, drive hips.</div>
    <div class="exercise-item"><b>Goblet Squat</b> Chest up, depth to parallel.</div>
    <div class="exercise-item"><b>Farmer's Carry</b> Brace core, steady pace.</div>
    <div class="exercise-item"><b>Assisted Pull-ups</b> Full range, scapula retracted.</div>
    <div class="exercise-item"><b>Push-up Variant</b> Full depth, core tight.</div>
  </div>

  <div class="controls section">
    <div>Progress: <span id="progress-text">0%</span></div>
    <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
    <button onclick="save()">Save Progress</button>
    <button onclick="exportLog()">Export Log</button>
    <button onclick="resetAll()">Reset All</button>
  </div>

  <div id="calendar-container"></div>

  <script>
    const start=new Date("2025-09-08");
    const micro=["Wall Sit","Push-ups","Seated Band Row","Hip Hinge Drill","Plank w/ Shoulder Taps","Standing Calf Raises","Split Squat","Chair Dips","Pallof Press","Glute Bridge March","Incline Push-ups","Lateral Band Walk","Single-Leg RDL","Hollow-Body Hold","Banded Overhead Press"];
    const skills=[["DNS Breathing","Bear Crawl Hold"],["Bird Dog","Hip 90/90 Stretch"],["Bodyweight Squat Practice","Wall Slides"],["Band Pull-aparts","Cat-Cow"],["Ankle Mobilization"]];
    const eccA=["Negative Pull-ups","Nordic Hamstring Curls","Eccentric Push-ups"], eccB=["Step-Down Negatives","Single-Leg RDL Negative","Negative Pull-ups"];
    const heavyLower=["Deadlift","Goblet Squat","Farmer's Carry"], heavyUpper=["Assisted Pull-ups","Push-up Variant"];
    const calendar=[];

    for(let w=0;w<4;w++){
      const days=[];
      for(let d=0;d<7;d++){
        const dt=new Date(start); dt.setDate(start.getDate()+w*7+d);
        const dd=dt.getDate().toString().padStart(2,"0");
        const mon=dt.toLocaleDateString("en-GB",{month:"short",year:"2-digit"});
        const date=`${dd}-${mon}`;
        const names=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"], idx=dt.getDay();
        let list=[];
        // Monday: heavy+micro
        if(idx===1){
          list=[...heavyLower];
          for(let i=0;i<3;i++) list.push(micro[(w*3+i)%15]);
        }
        // Tuesday: micro+skill
        else if(idx===2){
          for(let i=3;i<6;i++) list.push(micro[(w*3+i)%15]);
          list.push(...skills[w%skills.length]);
        }
        // Wednesday: micro+ecc
        else if(idx===3){
          for(let i=6;i<9;i++) list.push(micro[(w*3+i)%15]);
          list.push(...(w%2?eccB:eccA));
        }
        // Thursday: micro+skill
        else if(idx===4){
          for(let i=9;i<12;i++) list.push(micro[(w*3+i)%15]);
          list.push(...skills[(w+1)%skills.length]);
        }
        // Friday: heavy+micro
        else if(idx===5){
          list=[...heavyUpper];
          for(let i=12;i<15;i++) list.push(micro[(w*3+i)%15]);
        }
        // Saturday: skill only
        else if(idx===6){
          list.push(...skills[(w+2)%skills.length]);
        }
        days.push({day:names[idx],date,exercises:list});
      }
      const wkStart=days[1].date,wkEnd=days[5].date;
      calendar.push({week:w+1,range:`${wkStart} - ${wkEnd}`,days});
    }

    let prog=JSON.parse(localStorage.getItem("prog")||"{}");
    function render(){
      const cont=document.getElementById("calendar-container"); cont.innerHTML="";
      let total=0,done=0;
      calendar.forEach(wk=>{
        const hdr=document.createElement("button"); hdr.className="collapsible";
        hdr.textContent=`Week ${wk.week} - ${wk.range}`;
        const body=document.createElement("div"); body.className="content week";
        wk.days.forEach(d=>{
          let html=`<div class="day"><div class="day-header">${d.day} (${d.date})</div><div class="tracking">`;
          d.exercises.forEach(ex=>{
            const id=`${d.date}-${ex.replace(/ /g,"_")}`;
            const type=heavyLower.concat(heavyUpper).includes(ex)?"heavy":eccA.concat(eccB).includes(ex)?"ecc":skills.flat().includes(ex)?"skill":"micro";
            if(type==="micro"||type==="skill"){ total++; if(prog[id]?.done) done++;
              html+=`<div class="tracking-row"><input type="checkbox" onchange="setD('${id}','done',this.checked)" ${prog[id]?.done?"checked":""}/><label>${ex}</label><input type="number" placeholder="Reps" onchange="setD('${id}','reps',this.value)" value="${prog[id]?.reps||""}"/></div>`;
            } else if(type==="heavy"){["weight","reps","rpe"].forEach(f=>{total++;if(prog[id]?.[f])done++;});
              html+=`<div class="tracking-row"><label>${ex}</label> Wt <input type="number" onchange="setD('${id}','weight',this.value)" value="${prog[id]?.weight||""}"/> Reps <input type="number" onchange="setD('${id}','reps',this.value)" value="${prog[id]?.reps||""}"/> RPE <input type="number" onchange="setD('${id}','rpe',this.value)" value="${prog[id]?.rpe||""}"/></div>`;
            } else {["reps","rpe"].forEach(f=>{total++;if(prog[id]?.[f])done++;});
              html+=`<div class="tracking-row"><label>${ex}</label> Reps <input type="number" onchange="setD('${id}','reps',this.value)" value="${prog[id]?.reps||""}"/> RPE <input type="number" onchange="setD('${id}','rpe',this.value)" value="${prog[id]?.rpe||""}"/></div>`;
            }
          });
          html+="</div></div>";
          body.innerHTML+=html;
        });
        cont.appendChild(hdr); cont.appendChild(body);
      });
      const pct=total?Math.round(done/total*100):0;
      document.getElementById("progress-text").innerText=`${pct}%`;
      document.getElementById("progress-fill").style.width=`${pct}%`;
      document.querySelectorAll(".collapsible").forEach(btn=>btn.addEventListener("click",()=>{
        const nxt=btn.nextElementSibling; nxt.style.display=nxt.style.display==="block"?"none":"block";
      }));
    }

    function setD(id,field,val){prog[id]=prog[id]||{};prog[id][field]=val;localStorage.setItem("prog",JSON.stringify(prog));render();}
    function save(){localStorage.setItem("prog",JSON.stringify(prog));alert("Progress saved!");}
    function resetAll(){if(confirm("Reset all?")){prog={};localStorage.removeItem("prog");render();}}
    function exportLog(){let txt="Training Log\n\n";for(const k in prog)txt+=`${k}: ${JSON.stringify(prog[k])}\n`;const b=new Blob([txt],{type:"text/plain"}),u=URL.createObjectURL(b),a=document.createElement("a");a.href=u;a.download="training-log.txt";a.click();URL.revokeObjectURL(u);}
    document.addEventListener("DOMContentLoaded",render);
  </script>
</body>
</html>
